# ğŸ› ï¸ Ã‰tape 1 : Construction et rÃ©cupÃ©ration des dÃ©pendances Maven (cachÃ©es entre les builds)
FROM maven:3.9.6-eclipse-temurin-17 AS builder

WORKDIR /app

# Copier uniquement le fichier pom.xml pour tÃ©lÃ©charger les dÃ©pendances
COPY /crypto/pom.xml .

# TÃ©lÃ©charger les dÃ©pendances Maven (cette Ã©tape est cachÃ©e si elles sont dÃ©jÃ  dans le cache)
RUN mvn dependency:go-offline

# Maintenant, copier le reste des fichiers sources
COPY /crypto/src/ ./src

# ğŸƒâ€â™‚ï¸ Ã‰tape 2 : ExÃ©cution de l'application Spring Boot en mode dÃ©veloppement avec Maven
CMD ["mvn", "spring-boot:run"]
